<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <meta name="generator" content="Hugo 0.68.3" />
  <link rel="canonical" href="https://adpblg.co.uk/post/zelda/">

  

  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#000000">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="https://adpblg.co.uk/css/prism.css" media="none" onload="this.media='all';">

  
  
  <link rel="stylesheet" type="text/css" href="https://adpblg.co.uk/css/styles.css">

  <link rel="stylesheet" href="https://adpblg.co.uk/css/tweaks.css">

  <style id="inverter" media="none">
    .intro-and-nav, .main-and-footer { filter: invert(100%) }
    * { background-color: inherit }
    img:not([src*=".svg"]), .colors, iframe, .demo-container { filter: invert(100%) }
  </style>

  
  
  <title>emulation: a link to the past | adp</title>
</head>

  <body>
    <a href="#main">skip to content</a>
    <svg style="display: none">
  <symbol id="bookmark" viewBox="0 0 40 50">
   <g transform="translate(2266 3206.2)">
    <path style="stroke:currentColor;stroke-width:3.2637;fill:none" d="m-2262.2-3203.4-.2331 42.195 16.319-16.318 16.318 16.318.2331-42.428z"/>
   </g>
  </symbol>

  <symbol id="w3c" viewBox="0 0 127.09899 67.763">
   <text font-size="83" style="font-size:83px;font-family:Trebuchet;letter-spacing:-12;fill-opacity:0" letter-spacing="-12" y="67.609352" x="-26.782778">W3C</text>
   <text font-size="83" style="font-size:83px;font-weight:bold;font-family:Trebuchet;fill-opacity:0" y="67.609352" x="153.21722" font-weight="bold">SVG</text>
   <path style="fill:currentColor;image-rendering:optimizeQuality;shape-rendering:geometricPrecision" d="m33.695.377 12.062 41.016 12.067-41.016h8.731l-19.968 67.386h-.831l-12.48-41.759-12.479 41.759h-.832l-19.965-67.386h8.736l12.061 41.016 8.154-27.618-3.993-13.397h8.737z"/>
   <path style="fill:currentColor;image-rendering:optimizeQuality;shape-rendering:geometricPrecision" d="m91.355 46.132c0 6.104-1.624 11.234-4.862 15.394-3.248 4.158-7.45 6.237-12.607 6.237-3.882 0-7.263-1.238-10.148-3.702-2.885-2.47-5.02-5.812-6.406-10.022l6.82-2.829c1.001 2.552 2.317 4.562 3.953 6.028 1.636 1.469 3.56 2.207 5.781 2.207 2.329 0 4.3-1.306 5.909-3.911 1.609-2.606 2.411-5.738 2.411-9.401 0-4.049-.861-7.179-2.582-9.399-1.995-2.604-5.129-3.912-9.397-3.912h-3.327v-3.991l11.646-20.133h-14.062l-3.911 6.655h-2.493v-14.976h32.441v4.075l-12.31 21.217c4.324 1.385 7.596 3.911 9.815 7.571 2.22 3.659 3.329 7.953 3.329 12.892z"/>
   <path style="fill:currentColor;image-rendering:optimizeQuality;shape-rendering:geometricPrecision" d="m125.21 0 1.414 8.6-5.008 9.583s-1.924-4.064-5.117-6.314c-2.693-1.899-4.447-2.309-7.186-1.746-3.527.73-7.516 4.938-9.258 10.13-2.084 6.21-2.104 9.218-2.178 11.978-.115 4.428.58 7.043.58 7.043s-3.04-5.626-3.011-13.866c.018-5.882.947-11.218 3.666-16.479 2.404-4.627 5.954-7.404 9.114-7.728 3.264-.343 5.848 1.229 7.841 2.938 2.089 1.788 4.213 5.698 4.213 5.698l4.94-9.837z"/>
   <path style="fill:currentColor;image-rendering:optimizeQuality;shape-rendering:geometricPrecision" d="m125.82 48.674s-2.208 3.957-3.589 5.48c-1.379 1.524-3.849 4.209-6.896 5.555-3.049 1.343-4.646 1.598-7.661 1.306-3.01-.29-5.807-2.032-6.786-2.764-.979-.722-3.486-2.864-4.897-4.854-1.42-2-3.634-5.995-3.634-5.995s1.233 4.001 2.007 5.699c.442.977 1.81 3.965 3.749 6.572 1.805 2.425 5.315 6.604 10.652 7.545 5.336.945 9.002-1.449 9.907-2.031.907-.578 2.819-2.178 4.032-3.475 1.264-1.351 2.459-3.079 3.116-4.108.487-.758 1.276-2.286 1.276-2.286l-1.276-6.644z"/>
  </symbol>

  <symbol id="tag" viewBox="0 0 177.16535 177.16535">
    <g transform="translate(0 -875.2)">
     <path style="fill-rule:evenodd;stroke-width:0;fill:currentColor" d="m159.9 894.3-68.79 8.5872-75.42 77.336 61.931 60.397 75.429-76.565 6.8495-69.755zm-31.412 31.835a10.813 10.813 0 0 1 1.8443 2.247 10.813 10.813 0 0 1 -3.5174 14.872l-.0445.0275a10.813 10.813 0 0 1 -14.86 -3.5714 10.813 10.813 0 0 1 3.5563 -14.863 10.813 10.813 0 0 1 13.022 1.2884z"/>
    </g>
  </symbol>

  <symbol id="balloon" viewBox="0 0 141.73228 177.16535">
   <g transform="translate(0 -875.2)">
    <g>
     <path style="fill:currentColor" d="m68.156 882.83-.88753 1.4269c-4.9564 7.9666-6.3764 17.321-5.6731 37.378.36584 10.437 1.1246 23.51 1.6874 29.062.38895 3.8372 3.8278 32.454 4.6105 38.459 4.6694-.24176 9.2946.2879 14.377 1.481 1.2359-3.2937 5.2496-13.088 8.886-21.623 6.249-14.668 8.4128-21.264 10.253-31.252 1.2464-6.7626 1.6341-12.156 1.4204-19.764-.36325-12.93-2.1234-19.487-6.9377-25.843-2.0833-2.7507-6.9865-7.6112-7.9127-7.8436-.79716-.20019-6.6946-1.0922-6.7755-1.0248-.02213.0182-5.0006-.41858-7.5248-.22808l-2.149-.22808h-3.3738z"/>
     <path style="fill:currentColor" d="m61.915 883.28-3.2484.4497c-1.7863.24724-3.5182.53481-3.8494.63994-2.4751.33811-4.7267.86957-6.7777 1.5696-.28598 0-1.0254.20146-2.3695.58589-5.0418 1.4418-6.6374 2.2604-8.2567 4.2364-6.281 7.6657-11.457 18.43-12.932 26.891-1.4667 8.4111.71353 22.583 5.0764 32.996 3.8064 9.0852 13.569 25.149 22.801 37.517 1.3741 1.841 2.1708 2.9286 2.4712 3.5792 3.5437-1.1699 6.8496-1.9336 10.082-2.3263-1.3569-5.7831-4.6968-21.86-6.8361-33.002-.92884-4.8368-2.4692-14.322-3.2452-19.991-.68557-5.0083-.77707-6.9534-.74159-15.791.04316-10.803.41822-16.162 1.5026-21.503 1.4593-5.9026 3.3494-11.077 6.3247-15.852z"/>
     <path style="fill:currentColor" d="m94.499 885.78c-.10214-.0109-.13691 0-.0907.0409.16033.13489 1.329 1.0675 2.5976 2.0723 6.7003 5.307 11.273 14.568 12.658 25.638.52519 4.1949.24765 14.361-.5059 18.523-2.4775 13.684-9.7807 32.345-20.944 53.519l-3.0559 5.7971c2.8082.76579 5.7915 1.727 8.9926 2.8441 11.562-11.691 18.349-19.678 24.129-28.394 7.8992-11.913 11.132-20.234 12.24-31.518.98442-10.02-1.5579-20.876-6.7799-28.959-.2758-.4269-.57803-.86856-.89617-1.3166-3.247-6.13-9.752-12.053-21.264-16.131-2.3687-.86369-6.3657-2.0433-7.0802-2.1166z"/>
     <path style="fill:currentColor" d="m32.52 892.22c-.20090-.13016-1.4606.81389-3.9132 2.7457-11.486 9.0476-17.632 24.186-16.078 39.61.79699 7.9138 2.4066 13.505 5.9184 20.562 5.8577 11.77 14.749 23.219 30.087 38.74.05838.059.12188.1244.18052.1838 1.3166-.5556 2.5965-1.0618 3.8429-1.5199-.66408-.32448-1.4608-1.3297-3.8116-4.4602-5.0951-6.785-8.7512-11.962-13.051-18.486-5.1379-7.7948-5.0097-7.5894-8.0586-13.054-6.2097-11.13-8.2674-17.725-8.6014-27.563-.21552-6.3494.13041-9.2733 1.775-14.987 2.1832-7.5849 3.9273-10.986 9.2693-18.07 1.7839-2.3656 2.6418-3.57 2.4409-3.7003z"/>
     <path style="fill:currentColor" d="m69.133 992.37c-6.2405.0309-12.635.76718-19.554 2.5706 4.6956 4.7759 9.935 10.258 12.05 12.625l4.1272 4.6202h11.493l3.964-4.4516c2.0962-2.3541 7.4804-7.9845 12.201-12.768-8.378-1.4975-16.207-2.6353-24.281-2.5955z"/>
     <rect style="stroke-width:0;fill:currentColor" ry="2.0328" height="27.746" width="22.766" y="1017.7" x="60.201"/>
    </g>
   </g>
  </symbol>

  <symbol id="info" viewBox="0 0 41.667 41.667">
   <g transform="translate(-37.035 -1004.6)">
    <path style="stroke-linejoin:round;stroke:currentColor;stroke-linecap:round;stroke-width:3.728;fill:none" d="m76.25 1030.2a18.968 18.968 0 0 1 -23.037 13.709 18.968 18.968 0 0 1 -13.738 -23.019 18.968 18.968 0 0 1 23.001 -13.768 18.968 18.968 0 0 1 13.798 22.984"/>
    <g transform="matrix(1.1146 0 0 1.1146 -26.276 -124.92)">
     <path style="stroke:currentColor;stroke-linecap:round;stroke-width:3.728;fill:none" d="m75.491 1039.5v-8.7472"/>
     <path style="stroke-width:0;fill:currentColor" transform="scale(-1)" d="m-73.193-1024.5a2.3719 2.3719 0 0 1 -2.8807 1.7142 2.3719 2.3719 0 0 1 -1.718 -2.8785 2.3719 2.3719 0 0 1 2.8763 -1.7217 2.3719 2.3719 0 0 1 1.7254 2.8741"/>
    </g>
   </g>
  </symbol>

  <symbol id="warning" viewBox="0 0 48.430474 41.646302">
    <g transform="translate(-1.1273 -1010.2)">
     <path style="stroke-linejoin:round;stroke:currentColor;stroke-linecap:round;stroke-width:4.151;fill:none" d="m25.343 1012.3-22.14 37.496h44.28z"/>
     <path style="stroke:currentColor;stroke-linecap:round;stroke-width:4.1512;fill:none" d="m25.54 1027.7v8.7472"/>
     <path style="stroke-width:0;fill:currentColor" d="m27.839 1042.8a2.3719 2.3719 0 0 1 -2.8807 1.7143 2.3719 2.3719 0 0 1 -1.718 -2.8785 2.3719 2.3719 0 0 1 2.8763 -1.7217 2.3719 2.3719 0 0 1 1.7254 2.8741"/>
    </g>
  </symbol>

  <symbol id="menu" viewBox="0 0 50 50">
     <rect style="stroke-width:0;fill:currentColor" height="10" width="50" y="0" x="0"/>
     <rect style="stroke-width:0;fill:currentColor" height="10" width="50" y="20" x="0"/>
     <rect style="stroke-width:0;fill:currentColor" height="10" width="50" y="40" x="0"/>
   </symbol>

   <symbol id="link" viewBox="0 0 50 50">
    <g transform="translate(0 -1002.4)">
     <g transform="matrix(.095670 0 0 .095670 2.3233 1004.9)">
      <g>
       <path style="stroke-width:0;fill:currentColor" d="m452.84 192.9-128.65 128.65c-35.535 35.54-93.108 35.54-128.65 0l-42.881-42.886 42.881-42.876 42.884 42.876c11.845 11.822 31.064 11.846 42.886 0l128.64-128.64c11.816-11.831 11.816-31.066 0-42.9l-42.881-42.881c-11.822-11.814-31.064-11.814-42.887 0l-45.928 45.936c-21.292-12.531-45.491-17.905-69.449-16.291l72.501-72.526c35.535-35.521 93.136-35.521 128.64 0l42.886 42.881c35.535 35.523 35.535 93.141-.001 128.66zm-254.28 168.51-45.903 45.9c-11.845 11.846-31.064 11.817-42.881 0l-42.884-42.881c-11.845-11.821-11.845-31.041 0-42.886l128.65-128.65c11.819-11.814 31.069-11.814 42.884 0l42.886 42.886 42.876-42.886-42.876-42.881c-35.54-35.521-93.113-35.521-128.65 0l-128.65 128.64c-35.538 35.545-35.538 93.146 0 128.65l42.883 42.882c35.51 35.54 93.11 35.54 128.65 0l72.496-72.499c-23.956 1.597-48.092-3.784-69.474-16.283z"/>
      </g>
     </g>
    </g>
  </symbol>

  <symbol id="doc" viewBox="0 0 35 45">
   <g transform="translate(-147.53 -539.83)">
    <path style="stroke:currentColor;stroke-width:2.4501;fill:none" d="m149.38 542.67v39.194h31.354v-39.194z"/>
    <g style="stroke-width:25" transform="matrix(.098003 0 0 .098003 133.69 525.96)">
     <path d="m220 252.36h200" style="stroke:currentColor;stroke-width:25;fill:none"/>
     <path style="stroke:currentColor;stroke-width:25;fill:none" d="m220 409.95h200"/>
     <path d="m220 488.74h200" style="stroke:currentColor;stroke-width:25;fill:none"/>
     <path d="m220 331.15h200" style="stroke:currentColor;stroke-width:25;fill:none"/>
    </g>
   </g>
 </symbol>

 <symbol id="tick" viewBox="0 0 177.16535 177.16535">
  <g transform="translate(0 -875.2)">
   <rect style="stroke-width:0;fill:currentColor" transform="rotate(30)" height="155" width="40" y="702.99" x="556.82"/>
   <rect style="stroke-width:0;fill:currentColor" transform="rotate(30)" height="40" width="90.404" y="817.99" x="506.42"/>
  </g>
 </symbol>
</svg>

    <div class="wrapper">
      <header class="intro-and-nav" role="banner">
  <div>
    <div class="intro">
      <a
        class="logo"
        href="https://adpblg.co.uk"
        aria-label="adp home page"
      >
        <img src="https://adpblg.co.uk/images/logo.svg" alt="">
      </a>
      <p class="library-desc">
        
      </p>
    </div>
    <nav id="patterns-nav" class="patterns" role="navigation">
  <h2 class="vh">Main navigation</h2>
  <button id="menu-button" aria-expanded="false">
    <svg viewBox="0 0 50 50" aria-hidden="true" focusable="false">
      <use xlink:href="#menu"></use>
    </svg>
    Menu
  </button>
  
  <ul id="patterns-list">
  
    <li class="pattern">
      
      
      
      
      <a href="/" >
        <svg class="bookmark-icon" aria-hidden="true" focusable="false" viewBox="0 0 40 50">
          <use xlink:href="#bookmark"></use>
        </svg>
        <span class="text">Home</span>
      </a>
    </li>
  
    <li class="pattern">
      
      
      
      
      <a href="/post/" aria-current="page">
        <svg class="bookmark-icon" aria-hidden="true" focusable="false" viewBox="0 0 40 50">
          <use xlink:href="#bookmark"></use>
        </svg>
        <span class="text">Blog</span>
      </a>
    </li>
  
    <li class="pattern">
      
      
      
      
      <a href="/tags/" >
        <svg class="bookmark-icon" aria-hidden="true" focusable="false" viewBox="0 0 40 50">
          <use xlink:href="#bookmark"></use>
        </svg>
        <span class="text">Tags</span>
      </a>
    </li>
  
  </ul>
</nav>
  </div>
</header>

      <div class="main-and-footer">
        <div>
          
  <main id="main">
    <h1>
      <svg class="bookmark-icon" aria-hidden="true" viewBox="0 0 40 50" focusable="false">
        <use xlink:href="#bookmark"></use>
      </svg>
      emulation: a link to the past
    </h1>

    <div class="date">
      
      
      <strong>Publish date: </strong>Nov 7, 2020
      
        
      
    </div>

    
      <div class="tags">
        <strong>Tags: </strong>
        <ul aria-label="tags">
          
            <li>
              <svg class="tag-icon" aria-hidden="true" viewBox="0 0 177.16535 177.16535" focusable="false">
                <use xlink:href="#tag"></use>
              </svg>
              
              <a href="https://adpblg.co.uk/tags/exploration/">exploration</a>
            </li>
          
            <li>
              <svg class="tag-icon" aria-hidden="true" viewBox="0 0 177.16535 177.16535" focusable="false">
                <use xlink:href="#tag"></use>
              </svg>
              
              <a href="https://adpblg.co.uk/tags/music/">music</a>
            </li>
          
            <li>
              <svg class="tag-icon" aria-hidden="true" viewBox="0 0 177.16535 177.16535" focusable="false">
                <use xlink:href="#tag"></use>
              </svg>
              
              <a href="https://adpblg.co.uk/tags/maps/">maps</a>
            </li>
          
        </ul>
      </div>
    
    
    

    <p><img src="/pictures/king_of_the_nerds.jpg#center" alt="Alt"></p>
<p>A friend of mine recently hosted an elimination tournament for the best video game of all time. We squared up the best games in a brutal winner-takes-all knockout bracket. As we advanced through the rounds, I noticed that the games performing best were the ones we&rsquo;d played as kids. That&rsquo;s not surprising, nostalgia has a powerful draw. While my co-competitors were passionately making the case for older games, I found myself wanting to play them again. So, I decided to make a console that played those childhood games. That&rsquo;s what this post is about.</p>
<p>Oh, and Pokemon Blue won the tournament.</p>
<hr>
<h2 id="the-tutorial">the tutorial</h2>
<p><img src="/pictures/zelda_link_past_beginning.png#center" alt="Alt"></p>
<h3 id="an-ancient-evil-arises">an ancient evil arises</h3>
<p>It turns out that playing games from years past is not so trivial a process. To understand why, we&rsquo;re going to need to dip into some computational theory. A computer system, in its basic form, is made up of two parts: hardware and software. The hardware is the collection of electronic components that can perform different operations. Software is the list of instructions given to the hardware to co-ordinate all those operations into something useful.</p>
<p><img src="/pictures/software_hardware.png#center" alt="Alt"></p>
<p>A powerful idea to help visualise this is the notion of <em>state</em>. We say that, at any given moment in time, the hardware is in a particular state. That means that it has some particular data stored, it&rsquo;s showing a particular image on the screen, etc. By issuing instructions to the hardware, you order it to change its state. It will show something different on the screen, or change some of the data it has. By instructing hardware to move from state to state, we can design some incredible things.</p>
<p>Video game systems are computer systems too. The console itself, for example a Playstation, makes up the hardware of the system. The games are the software. A game is just a set of instructions to orchestrate all the various hardware parts of the console. The result of that orchestration is the game that plays out on the screen.</p>
<p><img src="/pictures/system_console_map.png#center" alt="Alt"></p>
<p>The above diagrams aren&rsquo;t totally accurate. Not every computer is the same. Computers are designed with different hardware to solve different problems. Consoles especially so. Newer systems have different, and better, hardware than older ones. And because the hardware is different, the software to instruct it must also be different. The game software must be written <em>for</em> the hardware, and will have a different structure as a result.</p>
<p><img src="/pictures/computer_jigsaw_puzzle.png#center" alt="Alt"></p>
<p>This poses a problem. What if you want to take some software from <code>console 1</code> and run it on a different <code>console 2</code>? It won&rsquo;t work, because the two won&rsquo;t mesh. This was fine at the time. If you wanted to play some Nintendo games, buy a Nintendo console. Sega games, Sega console. So on and so forth. But &ldquo;the time&rdquo; was 30+ years ago. You can&rsquo;t get easily get those old consoles now. Even if you did manage to get one, it would be a real pain to get them to work with modern TVs. Technology has moved on.</p>
<p>We&rsquo;re left with a boulder we can&rsquo;t move. Without some way to run software designed for one console on another, it is next to impossible to play an old Zelda game.</p>
<h3 id="enter-emulation">enter emulation</h3>
<p>This is a problem many programmers were keen to solve, on account of them loving video games and hating real work.  Their solution is elegant.</p>
<p>We know older games &ndash; pieces of software &ndash; are written for a specific hardware configuration. The software will issue instructions to the hardware, the hardware will do something based on the content of that instruction. Each &ldquo;something&rdquo; the hardware does, and by that I mean an operation, will change the hardware&rsquo;s state. It is the composition of those states, in the right order, at the right time, that makes up the game.</p>
<p><img src="/pictures/system_console_instruction.png#center" alt="Alt"></p>
<p>From the software&rsquo;s perspective it just issues orders. It&rsquo;s the hardware&rsquo;s job to execute them. If it doesn&rsquo;t, too bad. The software is not responsible for that. The reason it won&rsquo;t work on a different computer is that the hardware of the different machine doesn&rsquo;t understand these orders. To solve this, we can build a translator.</p>
<p><img src="/pictures/system_console_instruction_translated.png#center" alt="Alt"></p>
<p>Now we can mirror the state that the older console would have been in after any given instruction. Because the game is simply a specific and timely ordering of different hardware states, it follows that we have also mirrored the game. That&rsquo;s the magic of emulation.</p>
<h4 id="opcodes">opcodes</h4>
<p>Hardware is a broad term that covers a lot of things. The hardware in a video games console is a whole suite of components. There&rsquo;s graphics, memory, input/output, and more. We&rsquo;ll focus in on one component that&rsquo;s present in every set of hardware, the <strong>CPU</strong> (<strong>C</strong>ore <strong>P</strong>rocessing <strong>U</strong>nit). The CPU takes in instructions, and then executes commands based on those instructions. These orders to the CPU are called <strong>opcodes</strong> (<strong>op</strong>eration <strong>codes</strong>). We need to make sure that the opcode that the game issues is executed by our CPU.</p>
<p>The translator takes the opcode, and maps it to the opcode that our machine can understand, <em>and will have the same effect on the hardware state</em>. It then executes the translated instruction.</p>
<div class="expandable-section">
  
    <h3>
  
    
    
    
    
    
    <button aria-expanded="false" data-expands="js-expandable-0f710bd170741eb2bae71fc5795f3cf9">
      <span class="expandable-label">all at once or one at a time?</span>
      <svg aria-hidden="true" focusable="false" viewBox="0 0 70.866142 70.866141">
        <g transform="translate(0 -981.5)">
          <rect style="stroke-width:0;fill:currentColor" ry="5" height="60" width="9.8985" y="987.36" x="30.051" class="up-strut" />
          <rect style="stroke-width:0;fill:currentColor" ry="5" height="10" width="60" y="1012.4" x="5"/>
        </g>
      </svg>
    </button>
  
    </h3>
  
  <div id="js-expandable-0f710bd170741eb2bae71fc5795f3cf9" hidden>
    <p>Readers of <a href="/post/counting-change">counting change</a> may notice that this approach could benefit from some &lsquo;time-vs-space&rsquo; thinking. The game software is a list of pre-defined instructions. Instead of translating the instructions one by one, as they come, we could instead pre-translate them. This trade-off between converting the instructions in one go versus converting them on the fly is known as <em>static versus dynamic recompilation</em>.</p>
<p>Unfortunately, static compilation is very difficult. The software instructions often rely on results they can&rsquo;t know at the time. If you were playing Zelda, the game must first wait for you to decide which way you want to go before it can present the next part of the adventure. You could try and load all the possible results for all the possible decisions Link might make, but this rapidly becomes unfeasible. Additionally, sometimes software will generate <em>new</em> instructions in response to certain results! These can be difficult to predict, and guessing them is nearly impossible</p>

  </div>
</div>

<p>The software that manages this translation, alongside the myriad of other things needed to execute this idea, is called an emulator. Making them is extremely tricky. For one thing, what I&rsquo;ve drawn as one singular box named &lsquo;Hardware&rsquo; is instead a tightly knit system of physical components. An emulator must manage translation for all of these components, and the way they interact with each other. Crucially, games don&rsquo;t just take their instructions from software. They must also take input from the player and process it. CPU&rsquo;s manage this through <strong>interrupts</strong>. Trying to handle those properly for an emulated game is a fiddly business.</p>
<p>Additionally, this process of translation, as described, is very slow. Emulator engineers need to find some clever workarounds to speed it up to a rate that makes it usable. Were we to dive in to the design and development of these emulators, this blog post would be far longer and I fear I&rsquo;d be unable to competently guide you.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup></p>
<p>Luckily, someone else has already built one. There is a vast network of talented engineers who have worked to emulate dozens of different games consoles. We&rsquo;re going to use their work to make this console. We&rsquo;ll need two parts,</p>
<ul>
<li>Some hardware</li>
<li>Some emulation software</li>
</ul>
<h2 id="equipping-some-hardware">equipping some hardware</h2>
<h3 id="electronics">electronics</h3>
<p>We need some metal to run these games. Something solid. Some proper gear. You could use your laptop, but that&rsquo;s not much fun. It&rsquo;d be cooler to have a dedicated device. But we don&rsquo;t want to spend too much. If we were going to spend a lot of money on a console, better to just buy an Xbox or a Playstation. We want a machine that&rsquo;s cheap, but powerful enough to simulate older consoles.</p>
<p>We want a <a href="https://www.raspberrypi.org/">Raspberry Pi</a></p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f1/Raspberry_Pi_4_Model_B_-_Side.jpg/2880px-Raspberry_Pi_4_Model_B_-_Side.jpg#center" alt="Alt" title="The latest Raspberry Pi model"></p>
<p>This is a Raspberry Pi 4B. One of these small boys will set you back about Â£100 (with all the cables and whatnot). It&rsquo;s enough to make you think twice, but <a href="https://www.ign.com/articles/2013/10/15/the-real-cost-of-gaming-inflation-time-and-purchasing-power">nothing compared to the cost of the consoles it will be emulating.</a> It&rsquo;s more powerful too. If we put the Pi side-by-side with a NES, the differences are stark</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center"><strong>Nintendo Entertainment System</strong></th>
<th align="center">Raspberry Pi</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><strong>Processor Speed</strong></td>
<td align="center">1.79MHz</td>
<td align="center">1.5GHz</td>
</tr>
<tr>
<td align="center"><strong>Memory</strong></td>
<td align="center">2KB</td>
<td align="center">2GB</td>
</tr>
<tr>
<td align="center"><strong>Resolution</strong></td>
<td align="center">256 x 240</td>
<td align="center">4kp60</td>
</tr>
</tbody>
</table>
<p>It&rsquo;s often hard to appreciate how fast computing power improves relative to other technologies. The NES had 2 KB of memory, which is <code>2 * 1024</code> bytes. The Raspberry Pi has 2 <strong>GB</strong> of memory, which is <code>2 * 1024 * 1024 * 1024</code> bytes. Not to overdo it, but the little Pi has <em>one million</em> times more memory than the Nintendo Entertainment System.</p>
<p>This comparison speaks to something else about video games. A great video game isn&rsquo;t dependent on hardware. Some of the games we remember fondly don&rsquo;t require a big graphic load. Technology enables games, but is not the primary factor.</p>
<h3 id="case">case</h3>
<p>It&rsquo;s good to put a Pi in a case. Makes it easier to move around and keeps it safe. I decided to buy a case that looked like a NES, because of its iconic design and they were the easiest to find on Amazon.</p>
<p><img src="/pictures/nes_case.jpg#center" alt="Alt"></p>
<p>It came with a little fan, designed to keep the computer cool while it runs. This fan was <em>very</em> loud. I thought about replacing it, but ultimately decided against it. There was something about the noisy whirring of the fan that made the device feel more real. The case also came bundled with some controllers!</p>
<h3 id="retropie">retropie</h3>
<p>We&rsquo;ve got the box, but now we need the brains.</p>
<p>As mentioned earlier, emulation is a popular field. Many programmers played <em>a lot</em> of games as a kid. There are emulators for lots of different consoles available.</p>
<p>There&rsquo;s an ongoing project to assemble as many emulators as possible into one neat software bundle. It&rsquo;s called <a href="https://retropie.org.uk/">RetroPie</a>. Installation is very easy, the instructions on their website are clear and thorough.</p>
<p>RetroPie acts as a sort of emulator librarian. Emulators are software, so can be stored in a file like any other application. That means we can store more than one emulator, as long as we have the storage for them. Then, when we need to use one for an old game, it&rsquo;s loaded from the file and ready to go. When we get bored, we can pick another one, load it, and play something else.</p>
<p>With a bit of computer plumbing, we can install RetroPie onto the Raspberry Pi.</p>
<div class="ticks">
  <ul>
<li>Some hardware</li>
<li>Some emulation software</li>
</ul>
</div>

<p>The console completed, we need only some games.</p>
<h2 id="game-time">game time</h2>
<p>Games for old consoles came in these physical cartridges. On board the cartridges was some hardware that stored all the software instructions that made up the game.</p>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/NES-Cartridge.jpg/542px-NES-Cartridge.jpg#center" alt="Alt" title="Bit bigger than a USB stick!"></p>
<p>The older cartridges won&rsquo;t work with our console. You could find adaptors between the older interface and something more modern, like <strong>USB</strong> (<strong>U</strong>niversal <strong>S</strong>erial <strong>B</strong>us). But this would become infeasible pretty fast; you&rsquo;d need a separate adaptor for every console. That&rsquo;s if you could find them at all!</p>
<p>Luckily, software can save the day again. These cartridges store a list of instructions. Someone can copy those instructions from the cartridge into a software file, and then share that file. These files are usually referred to as <strong>ROM</strong>s, named after the <strong>R</strong>ead <strong>O</strong>nly <strong>M</strong>emory that is present on game cartridges.</p>
<p>Now, these ROMs are the intellectual property of the companies that created them. Distribution of them is a breach of copyright. Unfortunately, in many cases, it&rsquo;s also impossible to purchase them from the original vendor. I&rsquo;m not going to point you in the direction of a place where you can obtain ROMs, but I will point out that others have made their own solution to this problem.</p>
<p>Once we&rsquo;ve acquired some ROMs, all we need to is load them alongside the emulator.</p>
<h2 id="opening-credits">opening credits</h2>
<p>That&rsquo;s it. We&rsquo;re done! Now the real work can begin.</p>
<p>After all, my very own</p>
<p><img src="/pictures/pokemon_blue_beginning.png#center" alt="Alt"></p>
<section class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1" role="doc-endnote">
<p>For those of you whose interest I have piqued, you should refer to <a href="http://www.xsim.com/papers/Bario.2001.emubook.pdf">this work</a>. It lays out the foundations of emulation thinking. <a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</section>

  </main>
  <div id="disqus-container">
  
</div>


          <footer role="contentinfo">
  <div>
    <label for="themer">
      dark theme: <input type="checkbox" id="themer" class="vh">
      <span aria-hidden="true"></span>
    </label>
  </div>
  
    Made with <a href="https://gohugo.io/">Hugo</a>. Themed by <a href="https://github.com/zwbetz-gh/cupper-hugo-theme">Cupper</a>. Hosted on <a href="https://netlify.com">Netlify</a>
  
</footer>

        </div>
      </div>
    </div>
    <script src="https://adpblg.co.uk/js/prism.js"></script>



<script src="https://adpblg.co.uk/js/dom-scripts.js"></script>



<script src="/js/search.7aef046a0cc8b0c532f1d20087b920459bc868c936bb48a6ae221eceefca2d07.js"></script>

<link rel="stylesheet" href="/css/search.fe0cd54a21628574bff49d721c827d1bb165ab56b0f22dd55ae78addbe61c309.css"></link>


    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.css" integrity="sha384-dbVIfZGuN1Yq7/1Ocstc1lUEm+AT+/rCkibIcC/OmWo5f0EA48Vf8CytHzGrSwbQ" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/katex.min.js" integrity="sha384-2BKqo+exmr9su6dir+qCw08N2ZKRucY4PrGQPPWU1A7FtlCGjmEGFqXCv5nyM5Ij" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>

    
  

  </body>
</html>
